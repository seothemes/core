////
/// Sub menu component.
///
/// @group  Components
/// @author Lee Anthony <seothemeswp@gmail.com>
/// @link   https://github.com/seothemes/genesis-starter-theme
////

$sub-menu__width: $spacing--xxxl * $major-third !default;
$sub-menu__border: $base--border !default;
$sub-menu__border-radius: 0 !default;
$sub-menu__background-color: $color--white !default;
$sub-menu-link__color: $color--text !default;

// Sub menu
.sub-menu {
	display: none;
	top: 100%;
	width: 100%;
	margin: 0 0 0 $spacing--s;
	list-style-type: none;

	@include mq(m) {
		display: block;
		position: absolute;
		left: -999rem;
		width: $sub-menu__width;
		margin-left: -$spacing--m;
		border: $sub-menu__border;
		border-radius: $sub-menu__border-radius;
		background-color: $sub-menu__background-color;
		opacity: 0;
		transition: opacity $base--transition-duration $base--transition-timing-function;

		@include padding($spacing--s null);

		&:before {
			content: '';

			@include position(absolute, -$spacing--xxs null null $spacing--m);
			@include triangle("up", $spacing--s, $spacing--xxs, $color--white);
		}
	}

	// Link.
	a {
		color: $sub-menu-link__color;
	}

	// Hovered state.
	.menu-item-has-children:hover > &,
	.menu-item-has-children:focus > &,
	.menu-item-has-children:focus-within > & {

		@include mq(m) {
			left: auto;
			opacity: 1;
		}
	}

	// Sub menu menu item.
	.menu-item {
		width: 100%;

		@include mq($until: m) {

			&:last-of-type {
				padding-bottom: 0;
			}
		}

		@include mq(m) {
			width: auto;
			padding: $spacing--s $spacing--m;
		}

		&-has-children {
			position: relative;
		}
	}

	// Sub sub menu.
	& & {

		@include mq(m) {
			top: -1px;
			left: 100%;
			margin-left: 0;
			white-space: nowrap;
		}
	}

	// Sub menu toggle.
	&-toggle {
		display: flex;
		justify-content: center;
		margin: 0;
		padding: 0;
		background-color: transparent;
		line-height: 0;

		@include size($spacing--l);

		@include mq(m) {
			display: none;
		}

		@include hover-focus {
			background-color: transparent;
		}

		&:focus {
			outline: $base--border;
		}

		&:before {
			content: "";

			@include triangle("down", 1rem, 0.5rem, $color--text);
		}

		&.activated {

			&:before {

				@include triangle("up", 1rem, 0.5rem, $color--text);
			}
		}
	}
}
